package com.sweet.wx.handler;import cn.hutool.json.JSON;import com.soecode.wxtools.api.IService;import com.soecode.wxtools.api.WxConsts;import com.soecode.wxtools.api.WxMessageHandler;import com.soecode.wxtools.api.WxService;import com.soecode.wxtools.bean.WxUserList;import com.soecode.wxtools.bean.WxXmlMessage;import com.soecode.wxtools.bean.WxXmlOutMessage;import com.soecode.wxtools.exception.WxErrorException;import com.sweet.wx.wxconst.ResponseConst;import java.util.Map;public class WhoAmIHandler implements WxMessageHandler {    private IService iService = new WxService();    @Override    public WxXmlOutMessage handle(WxXmlMessage wxMessage, Map<String, Object> context, IService iService) throws WxErrorException {        WxXmlOutMessage response = execute(wxMessage);        return response;    }    private WxXmlOutMessage execute(WxXmlMessage wxMessage) throws WxErrorException {        String WxUserInfo = "";        String openid = wxMessage.getFromUserName();        WxUserList.WxUser userInfo = iService.getUserInfoByOpenId(new WxUserList.WxUser.WxUserGet(openid, WxConsts.LANG_CHINA));        WxUserInfo += "抓到你了:\n网名\t"+userInfo.getNickname()+"\t\t\t\uD83D\uDC37\n";        WxUserInfo += "性别\t"+(userInfo.getSex()==1?"男":"女")+"\t\t\t\uD83D\uDC37\n";        WxUserInfo += "国家\t"+userInfo.getCountry()+"\t\t\uD83D\uDC37\n";        WxUserInfo += "省份\t"+ userInfo.getProvince()+"\t\t\uD83D\uDC37\n";        WxUserInfo += "城市\t"+userInfo.getCity()+"\t\t\uD83D\uDC37\n";        WxUserInfo += "头像\t<a href='"+userInfo.getHeadimgurl()+"'>点击查看</a>"+"\uD83D\uDC37\uD83D\uDC37\n";        System.out.println(WxUserInfo);        return WxXmlOutMessage.TEXT().content(WxUserInfo).toUser(wxMessage.getFromUserName()).fromUser(wxMessage.getToUserName()).build();    }}