package com.sweet.modular.dept.controller;import com.baomidou.mybatisplus.core.metadata.IPage;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.sweet.core.model.ResultBean;import com.sweet.core.model.system.LayuiPageFactory;import com.sweet.core.model.system.LayuiPageInfo;import com.sweet.core.model.system.layTree;import com.sweet.core.util.StringUtil;import com.sweet.modular.base.BaseService;import com.sweet.modular.dept.entity.Dept;import com.sweet.modular.dept.service.DeptService;import com.sweet.modular.menu.model.MenuResult;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.ResponseBody;import java.util.ArrayList;/** * <p> * 部门表 前端控制器 * </p> * * @author wxl * @since 2019-11-28 */@Controller@RequestMapping("/admin/dept")public class DeptController {    @Autowired    private BaseService baseService;    @Autowired    private DeptService deptService;    @RequestMapping("")    public String dept(){        return "/admin/dept/dept";    }    private Page getPageContext() {        return LayuiPageFactory.defaultPage();    }    @RequestMapping("/addDept")    @ResponseBody    public ResultBean addDpet(String deptId){        Dept dept = deptService.addDept(deptId);        return ResultBean.success(dept);    }    @RequestMapping("/editDept")    @ResponseBody    public ResultBean editDept(Dept dept){        deptService.updateById(dept);        return ResultBean.success(dept);    }    @RequestMapping("/delDept")    @ResponseBody    public ResultBean delDept(Dept dept){        deptService.removeById(dept);        return ResultBean.success(dept);    }    @RequestMapping("/getDeptList")    @ResponseBody    public LayuiPageInfo getDeptList(Dept dept){        Page pageContext = getPageContext();        LayuiPageInfo layuiPageInfo = deptService.findPageBySpec(dept);        return layuiPageInfo;    }    @RequestMapping("/tree")    @ResponseBody    public ResultBean tree(){        ArrayList<layTree> trees = deptService.deptTree();        ArrayList<layTree> cloneTree = (ArrayList<layTree>) trees.clone();        ArrayList<layTree> newtrees = new ArrayList<layTree>();        //创建父级节点        newtrees.add(new layTree().createParent());        if(cloneTree.size()>0){            newtrees = baseService.coverLayuiTree(newtrees,cloneTree);        }        return ResultBean.success(newtrees);    }}