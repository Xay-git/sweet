<% layout("/common/_container.html"){ %><script type="text/javascript" charset="utf-8" src="/plugin/ueditor/ueditor.config.js"></script><script type="text/javascript" charset="utf-8" src="/plugin/ueditor/ueditor.all.min.js"> </script><script type="text/javascript" charset="utf-8" src="/plugin/ueditor/lang/zh-cn/zh-cn.js"></script><div class="layui-fluid" id="app">    <div class="layui-card" style="max-width: 75%;margin:30px auto;">        <div class="layui-card-body" >            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 35px;">                <legend>文章</legend>            </fieldset>            <form class="layui-form" lay-filter="articleForm" style="margin: 35px 0 30px 17%;">                    <input type="hidden" name="articleId">                    <div class="layui-form-item  ">                        <label class="layui-form-label">文章名称<span style="color: red;">*</span></label>                        <div class="layui-input-inline">                            <input name="articleName" type="text" placeholder="请输入文章名称" class="layui-input" lay-verify="required|" />                        </div>                    </div>                    <div class="layui-form-item  ">                        <label class="layui-form-label">文章类型</label>                        <div class="layui-input-inline">                             <select name="articleType" lay-search lay-filter="articleType" lay-verify="">                               <option></option>                               <option v-for="item in articleTypeDic" :value="item.dictId">{{item.name}}</option>                             </select>                        </div>                    </div>                    <div class="layui-form-item  ">                        <label class="layui-form-label">作者</label>                        <div class="layui-input-inline">                            <input name="author" type="text" placeholder="请输入作者" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item  ">                        <label class="layui-form-label">内容</label>                        <div class="layui-input-inline">                             <script id="content" name="content" type="text/plain" style="width:700px;height:400px;"></script>                        </div>                    </div>                    <div class="layui-form-item  layui-hide">                        <label class="layui-form-label">乐观锁保留字段</label>                        <div class="layui-input-inline">                            <input name="version" type="text" placeholder="请输入乐观锁保留字段" class="layui-input" lay-verify="" />                        </div>                    </div>                    <div class="layui-form-item" style="margin:28px 30px;">                        <div class="layui-input-block">                            <button type="button" class="layui-btn" lay-filter="articleForm" lay-submit>提交</button>                            <button type="button" class="layui-btn layui-btn-primary" @click="back">返回</button>                        </div>                    </div>            </form>        </div>    </div></div><script>    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:{},            articleTypeDic:[],        },        computed:{        },        methods: {            getDetail:async function(articleId){                vm.info = await request.fetch("getArticleDetail",{articleId:articleId});                form.val('articleForm', vm.info);            },            back:function(){                location.href = 'article_list';            },            getDic:async function(){                 var data = {                     articleType:'100edb6ca33a00a5bf28d6592738523c',                 }                 var res = await api.getDictList(data);                 vm.articleTypeDic = res.articleType;            }        },        mounted:async function() {            vm = this;            var articleId = app.getUrlParam('articleId');            await vm.getDic();            app.isNotEmpty(articleId) && await vm.getDetail(articleId);            var uecontent = UE.getEditor('content');            form.on('submit(articleForm)', function (data) {                request.post("editArticle",data.field).then(res=>{                    app.success("操作成功！");                    location.href = 'article_list'                })                return false;            });            form.render();        },        updated: function () {            form.render();        }    })</script><% } %><style>    .layui-input-inline{        min-width:350px !important;    }    .layui-form-select dl{        z-index:9999;    }</style>