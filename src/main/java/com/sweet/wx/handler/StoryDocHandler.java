package com.sweet.wx.handler;import com.soecode.wxtools.api.IService;import com.soecode.wxtools.api.WxConsts;import com.soecode.wxtools.api.WxMessageHandler;import com.soecode.wxtools.api.WxService;import com.soecode.wxtools.bean.SenderContent;import com.soecode.wxtools.bean.WxOpenidSender;import com.soecode.wxtools.bean.WxXmlMessage;import com.soecode.wxtools.bean.WxXmlOutMessage;import com.soecode.wxtools.bean.result.SenderResult;import com.soecode.wxtools.exception.WxErrorException;import com.sweet.wx.wxconst.ResponseConst;import java.util.ArrayList;import java.util.List;import java.util.Map;public class StoryDocHandler implements WxMessageHandler {    private IService iService = new WxService();    @Override    public WxXmlOutMessage handle(WxXmlMessage wxMessage, Map<String, Object> context, IService iService) throws WxErrorException {        WxXmlOutMessage response = execute(wxMessage);        return response;    }    private WxXmlOutMessage execute(WxXmlMessage wxMessage) {        WxOpenidSender sender = new WxOpenidSender();        List<String> openidList = new ArrayList<>();        openidList.add(wxMessage.getFromUserName());        sender.setTouser(openidList);        //群发文本内容        sender.setMsgtype(WxConsts.SEND_ALL_NEWS);        SenderContent.Media media = new SenderContent.Media();        media.setMedia_id("Ea_h582SmNDqnBiP4q7dqJkw6mFlLLCR7SirrvWv0BQ");        sender.setMpnews(media);        try {            SenderResult result = iService.sendAllByOpenid(sender);            System.out.println(result.toString());        } catch (WxErrorException e) {            e.printStackTrace();        }   return null;//        return WxXmlOutMessage.TEXT().content(ResponseConst.STORY).toUser(wxMessage.getFromUserName()).fromUser(wxMessage.getToUserName()).build();    }}