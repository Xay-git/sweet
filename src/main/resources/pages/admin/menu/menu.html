<%layout("/common/_container.html"){%><div class="layui-fluid" id="app">        <div class="layui-col-md12">            <div class="layui-card">                <div class="layui-card-body">                    <div class="layui-form toolbar">                        <div class="layui-form-item">                            <div class="layui-inline">                                <input id="condition" class="layui-input" type="text" placeholder="名称"/>                            </div>                            <div class="layui-inline">                                <button type="button" id="btnSearch" class="layui-btn icon-btn"><i class="layui-icon">&#xe615;</i>搜索</button>                                <button type="button" id="btnAdd" class="layui-btn icon-btn" @click="open"><i class="layui-icon">&#xe654;</i>添加</button>                                <button type="button" @click="insTb.expandAll();" class="layui-btn  layui-btn-primary">                                    <i class="layui-icon">&#xe668;</i>展开全部                                </button>                                <button type="button" @click="insTb.foldAll();" id="btnFoldAll" class="layui-btn  layui-btn-primary">                                    <i class="layui-icon">&#xe66b;</i>折叠全部                                </button>                            </div>                        </div>                    </div>                    <table class="layui-table" id="demoTreeTable1" lay-filter="bedTable"></table>                </div>            </div>        </div>    </div></div><!-- 表格操作列 --><script type="text/html" id="demoTreeTableBar1">    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="edit">修改</a>    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a></script><!-- 表格状态列 --><script type="text/html" id="demoTreeTableState1">    <input type="checkbox" lay-filter="ckState" value="{{d.id}}" lay-skin="switch"           lay-text="正常|锁定" {{d.state==0?'checked':''}}/></script><script>    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info:'',            tree:''        },        methods: {            open:function () {                top.layui.admin.open({                    type: 2,                    title: '添加菜单',                    content: '/admin/menu/menu_add',                    end:function () {                        admin.getTempData('formOk') && location.reload();                    }                });            }        },        mounted:async function() {            vm = this;            vm.tree = await api.getTableTree();            layui.use(['treeTable'], function () {                var treeTable = layui.treeTable;                // 渲染表格                vm.insTb = treeTable.render({                    elem: '#demoTreeTable1',                    data: vm.tree,                    height: 'full-150',                    tree: {                        iconIndex: 0,                        idName: 'menuId',  // 自定义id字段的名称                        getIcon: function (d) {                            if (d.children) {                                return '<i class="ew-tree-icon ew-tree-icon-folder"></i>';                            } else {                                return '<i class="ew-tree-icon ew-tree-icon-file"></i>';                            }                        }                    },                    cols: [                        {field: 'menuName', title: '菜单名', width: 160},                        {field: 'url', title: '请求地址', width: 160},                        {field: 'perms', title: '权限标识', width: 160},                        {field: 'type', title: '类型', width: 160},                        {field: 'icon', title: '图标', width: 160,templet(d){                            return '<i class="layui-icon '+d.icon+'" style="font-size: 25px;">'                            }},                        {field: 'orderNum', title: '排序', width: 160},                        {field: 'createTime', title: '创建时间', width: 180},                        {align: 'center', toolbar: '#demoTreeTableBar1', title: '操作'}                    ],                    style: 'margin-top:0;'                });                treeTable.on('tool(demoTreeTable1)', function (obj) {                    var event = obj.event;                    if (event == 'del') {                        layer.msg('点击了删除', {icon: 1});                    } else if (event == 'edit') {                        console.log(JSON.stringify(obj.data));                        top.layui.admin.open({                            type: 2,                            title: '修改',                            content: '/admin/menu/menu_add?menuId='+obj.data.menuId,                            resize:true,                            end:function () {                                admin.getTempData('formOk') && location.reload();                            }                        });                    }                });                vm.insTb.expandAll();            });        },        updated: function () {        }    })</script><% } %>